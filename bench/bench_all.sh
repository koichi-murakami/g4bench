#!/bin/sh -
# ======================================================================
#  G4Bench benchmark (single thread)
# ======================================================================
export LANG=C

# ======================================================================
# run parameters
# ======================================================================
export G4DATA=/opt/geant4/data/10.7.1

# ======================================================================
# functions
# ======================================================================
check_error() {
  if [ $? -ne 0 ]; then
    exit -1
  fi
}

show_line() {
echo "========================================================================"
}

# ======================================================================
# main
# ======================================================================
if [ -d run ]; then
  echo "[ERROR] run directory already exists."
  exit -1
fi
mkdir run
cd run

show_line
echo " Execute G4Bench tests"
show_line

# ======================================================================
export G4BENCH=../../ecal
../ecal_e1000.sh
mv g4bench.json ecal.json

# ======================================================================
export G4BENCH=../../hcal
../hcal_p10.sh
mv g4bench.json hcal.json

# ======================================================================
export G4BENCH=../../vgeo
../vgeo_x18.sh
mv g4bench.json vgeo_x18.json

# ======================================================================
../vgeo_e20.sh
mv g4bench.json vgeo_e20.json

# ======================================================================
../vgeo_p200.sh
mv g4bench.json vgeo_p200.json

# ======================================================================
cd ..
exit $?
